<table class="table table-sm table-bordered">
  <thead class="thead-light">
    <tr>
      <th scope="col">{{ ver_todo|raw }}</th>
      {%  if bdistribuir %}
	    {%  if modo == 'mod' %}
          <th scope="col">{{ "rev.datos"|trans }}</th>
        {% endif %}
      {% endif %}
      <th scope="col">{{ prot_local_header }}</th>
      <th scope="col">{{ "tipo"|trans }}</th>
      <th scope="col">{{ "destino"|trans }}</th>
      <th scope="col">{{ "ref."|trans }}</th>
      <th scope="col">{{ "asunto"|trans }}</th>
      <th scope="col">{{ "adj."|trans }}</th>
    </tr>
  </thead>
  <tbody>
  {% for row in a_acciones %}
    <tr>
      <th scope="row">{{ row.link_ver|raw }}</th>
      {%  if bdistribuir %}
	    {%  if modo == 'mod' %}
          <td>{{ row.link_mod|raw }}</td>
        {% endif %}
      {% endif %}
      <td>{{ row.prot_local|raw }}</td>
      <td>{{ row.tipo|raw }}</td>
      <td>{{ row.destino|raw }}</td>
      <td>{{ row.ref|raw }}</td>
      <td>{{ row.asunto|raw }}</td>
      <td>{{ row.adjuntos|raw }}</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
<script type="text/javascript">
$(document).ready(function() {
	tabs_show('{{ vista }}','{{ filtro }}');
});
fnjs_distribuir_escrito=function(id_escrito) {
    var ssfsv = 'sv';
    var winPrefs="dependent=yes,width=950,height=700,screenX=200,screenY=200,titlebar=yes,scrollbars=yes";
    var server = '{{ server }}'
    var url = server+'/apps/expedientes/controller/escrito_distribuir.php?id_escrito='+id_escrito;
    w=window.open(url, "", winPrefs);
    w.focus();
}
fnjs_revisar_escrito=function(event,id_escrito) {
    var winPrefs="dependent=yes,width=1400,height=800,screenX=200,screenY=200,titlebar=yes,scrollbars=yes";
    var url_ajax = 'apps/etherpad/controller/getUrlEscrito.php';
    var param_json = { tipo_id: 'escrito', id: id_escrito };
    
    request=$.ajax({
        data: param_json,
        url: url_ajax,
        type: 'post'
    });

    request.done( function (rta) {
        // antes, dentro del ajax, hacia falta el responseText
        //url=rta.responseText;
        url=rta;
        w=window.open(url, "", winPrefs);
        w.focus();
    });
	request.fail(function(JqXHR, textStatus, errorThrown){
		alert('An error occurred... Look at the console (F12 or Ctrl+Shift+I, Console tab) for more information!');
        console.error("Hi ha un error: "+ textStatus, errorThrown);
    });

    event.preventDefault();
	event.stopPropagation();
	event.stopImmediatePropagation();
	return false;
}
</script>