<div class="card w-50 mx-auto ">
  <div class="card-header">
    <h5 class="card-title">{{ "Acciones para el expediente"|trans }}:</h5>
    <h5 class="card-title">{{ asunto }}</h5>
  </div>
  <div class="card-body">
<div class="row">
{% for row in a_botones %}
  <div class="col">
	<button type="button" class="btn btn-info" onclick="fnjs_accion('{{ row.accion }}')">{{ row.txt }}</button>
  </div>
{% endfor %}
</div>
</div>
</div>

<div class="row">
<div class="col" style="margin: 1cm;"><!-- per quedar alineat del pills que tambÃ© tenen un marge de 1cm. -->
  <button type="button" class="btn btn-secondary" onClick="fnjs_cancelar(event);" >
    {{ "Cancelar"|trans }}
  </button>
</div>
</div>
    
<script>
fnjs_accion=function(accion){
	//debugger;
	if (accion == 'exp_cp_oficina') {
		alert ('hay que poner la funcion de escoger oficina destino');
		return false;
	}
	var err=0;
    // grabar el tipo de doc
    var url_doc = 'apps/expedientes/controller/expediente_update.php';
    var param_json = { que: accion, id_expediente: {{ id_expediente }} };
    request=$.ajax({
        data: param_json,
        url: url_doc,
        type: 'post'
    });
    request.done( function (json) {
        if (json.success != true) {
            rta_txt = rta.mensaje;
            alert ('error: '+rta_txt);
        } else {
        	fnjs_update_div('#main','{{ pagina_cancel|raw }}');
        }
    });
}
fnjs_cancelar=function(event){
	// Asegurarme que es por click y no por return (posicion: 0,0)
	var x = event.x || event.clientX;
    var y = event.y || event.clientY;
    if (!x && !y) {
        event.preventDefault();
        event.stopPropagation();
        event.stopImmediatePropagation();
    	return false;
    }
    event.preventDefault(); //prevent default action 	
	fnjs_update_div('#main','{{ pagina_cancel|raw }}');
}
</script>