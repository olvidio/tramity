<script type="text/javascript">
fnjs_ver_escrito=function(id_escrito) {
    var ssfsv = 'sv';
    var winPrefs="dependent=yes,width=950,height=700,screenX=200,screenY=200,titlebar=yes,scrollbars=yes";
    var server = '{{ server }}'
    var url = server+'/apps/expedientes/controller/escrito_ver.php?id_escrito='+id_escrito;
    w=window.open(url, "sele", winPrefs);
    w.focus();
}

fnjs_ver_entrada=function(id_entrada) {
    var ssfsv = 'sv';
    var winPrefs="dependent=yes,width=950,height=700,screenX=200,screenY=200,titlebar=yes,scrollbars=yes";
    var server = '{{ server }}'
    var url = server+'/apps/entradas/controller/entrada_ver.php?id_entrada='+id_entrada;
    w=window.open(url, "sele", winPrefs);
    w.focus();
}

fnjs_del_antecedente=function(tipo,id_escrito) {
	var que='quitar';
	var id_expediente=$('#id_expediente').val();
    var url_ajax = 'apps/expedientes/controller/antecedentes_ajax.php';

	//alert("Borrar entrada: "+id_entrada);
    var param_json = { que: que, tipo_doc: tipo, id_expediente: id_expediente, id_escrito: id_escrito };
    request=$.ajax({
        data: param_json,
        url: url_ajax,
        type: 'post'
    });
    request.done( function (rta) {
        rta_txt=rta;
        if (rta_txt==undefined) {
            rta_txt='';
        }
        $('#lista_antecedentes').html(rta);
    });
}

fnjs_adjuntar_antecedente=function(tipo,id_escrito,id_expediente) {
	var que='adjuntar';
	
	//alert("entrada: "+id_entrada+"; exp.: "+id_expediente);
	//debugger;
    var url_ajax = 'apps/expedientes/controller/antecedentes_ajax.php';
    
    var param_json = { que: que, tipo_doc: tipo, id_expediente: id_expediente, id_escrito: id_escrito };
    request=$.ajax({
        data: param_json,
        url: url_ajax,
        type: 'post'
    });
    request.done( function (rta) {
        rta_txt=rta;
        if (rta_txt==undefined) {
            rta_txt='';
        }
        if (rta_txt != '' && rta_txt != '\n') {
		    $('#lista_antecedentes').html(rta);
        }
    });
	
	// close div modal
    $('#ModalBuscar .close').click();
}
	
fnjs_antecedente=function(event,n) {
	//n = 1 -> Entradas
	//n = 2 -> Expedientes
	//n = 3 -> Escritos-propuestas
	var err=0;
	var que = 'buscar_'+n;
	var id_expediente=$('#id_expediente').val();
	var oficina_buscar=$('#oficina_buscar').val();
	var asunto_buscar=$('#asunto_buscar').val();
	
	if (!n) { alert("{{ "No se ha definido el tipo de escrito"|trans }}"); err=1; }

	if (err!=1) {
        var url_ajax = 'apps/expedientes/controller/antecedentes_ajax.php';
        var param_json = { que: que, id_expediente: id_expediente, asunto_buscar: asunto_buscar, oficina_buscar: oficina_buscar };
        request=$.ajax({
            data: param_json,
            url: url_ajax,
            type: 'post'
        });
        request.done( function (rta) {
            //debugger;
            //rta_txt=rta.responseText;
            rta_txt=rta;
            if (rta_txt==undefined) {
                rta_txt='';
            }
            if (rta_txt != '' && rta_txt != '\n') {
                $('#lista').html(rta);
            }
        });
	}
}

</script>